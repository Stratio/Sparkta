<!--
    © 2017 Stratio Big Data Inc., Sucursal en España. All rights reserved.
    This software – including all its source code – contains proprietary
    information of Stratio Big Data Inc., Sucursal en España and
    may not be revealed, sold, transferred, modified, distributed or
    otherwise made available, licensed or sublicensed to third parties;
    nor reverse engineered, disassembled or decompiled, without express
    written authorization from Stratio Big Data Inc., Sucursal en España.
-->
<div class="executions">
  <div class="executions__bar">
    <h2 class="egeo-title-large title">Executions</h2>
    <div class="executions__filters">
      <span class="item">
        <st-dropdown-menu [items]="workflowTypes" [active]="showedFilter === 'type'" [selectedItem]="typeFilter"
          (change)="onChangeTypeFilter.emit($event.value)">
          <span (click)="selectFilter($event, 'type')">{{typeFilter.label}}<i class="icon icon-arrow2_down"></i></span>
        </st-dropdown-menu>
      </span>
      <span class="item">
        <st-dropdown-menu [items]="timeIntervals" [active]="showedFilter === 'time'"
          [selectedItem]="timeIntervalFilter" (change)="onChangeTimeIntervalFilter.emit($event.value)">
          <span (click)="selectFilter($event, 'time')">{{timeIntervalFilter.label}}<i
              class="icon icon-arrow2_down"></i></span>
        </st-dropdown-menu>
      </span>
    </div>
  </div>
  <div class="dynamic-subheader">
    <div class="dynamic-container">
      <div class="row executions__tools">
        <div class="col-sm-12">
          <div class="executions__search">
            <st-search class="executions__search-input" [placeholder]="'Search...'" qaTag="search-execution" [debounce]="200"
              (search)="onSearch.emit($event.text)" [value]="searchQuery"></st-search>
          </div>
        </div>
      </div>
    </div>
  </div>
  <st-table [fields]="fields" [sortable]="true" [currentOrder]="currentOrder" [selectableAll]="true"
    [ngClass]="{'active-selection' : selectedExecutions.length}"

    [selectedAll]="areAllSelected" qaTag="scheduled-table" class="execution-table checkbox-table"
    (changeOrder)="onChangeOrder.emit($event)" (selectAll)="toggleAllExecutions($event)">
    <tr st-table-row *ngFor="let execution of scheduledExecutions;"
    [selected]="selectedExecutions.indexOf(execution.id) > -1"
     (click)="selectExecution.emit(execution.id)">
      <td st-table-cell st-table-row-content class="check-column">
        <st-checkbox [checked]="selectedExecutions.indexOf(execution.id) > -1" [value]="execution"></st-checkbox>
      </td>
      <td st-table-cell st-table-row-content>
        {{execution.name}}
      </td>
      <td st-table-cell st-table-row-content>
        {{execution.initDateLocalized}}
      </td>
      <td st-table-cell st-table-row-content>
        {{execution.duration}}
      </td>
      <td st-table-cell st-table-row-content>
        {{execution.active ? 'Yes' : 'No'}}
      </td>
      <td st-table-cell st-table-row-content>
         <div *ngIf="execution.executed">
            <div class="scheduled__status scheduled__status--started"></div>Started
         </div>
         <div *ngIf="!execution.executed">
            <div class="scheduled__status"></div>Not started
         </div>
      </td>
    </tr>
  </st-table>
  <div class="empty-table">Empty results</div>
</div>