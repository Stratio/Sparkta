{
   "name": "Cube",
   "icon": "Cube",
   "category": "SQL",
   "className": "CubeTransformStep",
   "classPrettyName": "Cube",
   "arity": [
      "UnaryToNary"
   ],
   "supportedEngines": [
      "Streaming"
   ],
   "supportedDataRelations": [
      "ValidData"
   ],
   "description": "Create cubes in order to make real time aggregations based in the OLAP concept.",
   "properties": [
      {
         "propertyId": "dimensions",
         "propertyName": "_DIMENSIONS_",
         "propertyType": "list",
         "required": true,
         "fields": [
            {
               "propertyId": "name",
               "propertyName": "_INPUT_FIELD_",
               "propertyType": "text",
               "showSchemaFields": true,
               "required": true,
               "width": 8,
               "tooltip": "Dimension name, the field we want to group by. This name must be present in the input row fields. A dimension is a structure that categorizes facts and apply measures onto them generating an aggregation. Dimensions may be identified with the fields in a GROUP BY operation.",
               "qa": "fragment-details-cube-dimension-name"
            }
         ],
         "tooltip": "List of defined dimensions assigned to the cube.",
         "qa": "fragment-details-cube-dimensions"
      },
      {
         "propertyId": "operators",
         "propertyName": "_OPERATORS_",
         "propertyType": "list",
         "complexForm": true,
         "required": true,
         "fields": [
            {
               "propertyId": "name",
               "propertyName": "_NAME_",
               "propertyType": "text",
               "required": true,
               "width": 4,
               "tooltip": "Name assigned to the new field containing the aggregated value for this operator.",
               "qa": "fragment-details-measure-name"
            },
            {
               "propertyId": "inputField",
               "propertyName": "_INPUT_FIELD_",
               "propertyType": "text",
               "showSchemaFields": true,
               "width": 4,
               "tooltip": "Field belonging to an incoming input connected to the Cube transformation. In order to make the aggregation this field must be defined in the Dimensions section too.",
               "qa": "fragment-details-cube-operator-inputField"
            },
            {
               "propertyId": "classType",
               "propertyName": "_CLASS_TYPE_",
               "propertyType": "select",
               "required": true,
               "values": [
                  {
                     "label": "Avg",
                     "value": "Avg"
                  },
                  {
                     "label": "Count",
                     "value": "Count"
                  },
                  {
                     "label": "Max",
                     "value": "Max"
                  },
                  {
                     "label": "Median",
                     "value": "Median"
                  },
                  {
                     "label": "Min",
                     "value": "Min"
                  },
                  {
                     "label": "Stddev",
                     "value": "Stddev"
                  },
                  {
                     "label": "Sum",
                     "value": "Sum"
                  },
                  {
                     "label": "Variance",
                     "value": "Variance"
                  },
                  {
                     "label": "Word count",
                     "value": "WordCount"
                  }
               ],
               "width": 3,
               "tooltip": "Type of aggregation operator used.",
               "qa": "fragment-details-cube-operator-classType"
            },
           {
             "propertyId": "type",
             "propertyName": "_RETURN_TYPE_",
             "propertyType": "select",
             "required": false,
             "values": [
               {
                 "label": "String",
                 "value": "string"
               },
               {
                 "label": "Long",
                 "value": "long"
               },
               {
                 "label": "Float",
                 "value": "float"
               },
               {
                 "label": "Double",
                 "value": "double"
               },
               {
                 "label": "Integer",
                 "value": "integer"
               },
               {
                 "label": "Date",
                 "value": "date"
               },
               {
                 "label": "Timestamp",
                 "value": "timestamp"
               }
             ],
             "width": 3,
             "tooltip": "Type of aggregation value returned.",
             "qa": "fragment-details-cube-operator-type"
           }
         ],
         "tooltip": "List of operators assigned to the cube.",
         "qa": "fragment-details-cube-measures"
      },
      {
         "propertyId": "waterMark",
         "propertyName": "_WATER_MARK_",
         "propertyType": "text",
         "showSchemaFields": true,
         "float": true,
         "width": 4,
         "tooltip": "Watermarking allows the user to indicate a timestamp for the aggregation operation. The user may indicate an input field to be used as a restraint in order to purge the in-memory data states that exceeds this threshold.",
         "qa": "fragment-details-cube-waterMark"
      },
      {
         "propertyId": "availability",
         "propertyName": "_AVAILABILITY_",
         "propertyType": "text",
         "default": "1m",
         "width": 4,
         "tooltip": "When a watermark is defined, it's necessary to indicate the availability of the data. The input data is discarded if it's less than the current date minus the availability. The value indicates a span of time.",
         "qa": "fragment-details-cube-availability"
      },
      {
         "propertyId": "timeoutKey",
         "propertyName": "_TIMEOUT_KEY_",
         "propertyType": "text",
         "width": 4,
         "required": false,
         "tooltip": "Set the duration after which the state of an idle dimension will be removed. A dimension and its state is considered idle if it has not received any data for at least the given duration.",
         "qa": "workflow-transformation-cube-timeoutKey"
      },
      {
         "propertyId": "partitions",
         "propertyName": "_PARTITIONS_",
         "propertyType": "text",
         "required": false,
         "width": 4,
         "tooltip": "Number of partitions assigned to the generated streams",
         "qa": "workflow-transformation-cube-partitions"
      },
      {
         "propertyId": "inputSchemas",
         "propertyName": "_INPUTS_TRIGGER_SCHEMA_",
         "propertyType": "list",
         "required": false,
         "complexForm": true,
         "tooltip": "Section that allows the user to define incoming steps schemas. If defined properly this would result in avoiding doing the schema calculation for all defined incoming inputs.",
         "qa": "fragment-details-schema-fields",
         "fields": [
            {
               "propertyId": "stepName",
               "propertyName": "_INPUT_STEP_NAME_",
               "propertyType": "text",
               "showInputSteps": true,
               "required": true,
               "tooltip": "Incoming step name.",
               "width": 8,
               "float": false,
               "qa": "fragment-details-field-name"
            },
            {
               "propertyId": "schema",
               "propertyName": "_DESERIALIZER_SCHEMA_",
               "propertyType": "textarea",
               "contentType": "JSON",
               "width": 12,
               "tooltip": "Schema expressed in JSON/Spark format or from a valid sample from the input being defined.",
               "required": true,
               "qa": "fragment-details-field-query"
            }
         ]
      },
      {
         "propertyId": "whenError",
         "propertyName": "_TRANSFORMATION_WHEN_ERROR_",
         "propertyType": "select",
         "values": [
            {
               "label": "Error",
               "value": "Error"
            },
            {
               "label": "Discard",
               "value": "Discard"
            }
         ],
         "qa": "workflow-transformation-whenError"
      },
      {
         "propertyId": "whenRowError",
         "propertyName": "_TRANSFORMATION_WHEN_ROW_ERROR_",
         "propertyType": "select",
         "values": [
            {
               "label": "Error",
               "value": "RowError"
            },
            {
               "label": "Discard",
               "value": "RowDiscard"
            }
         ],
         "tooltip": "Sets the policy followed by the transformation when encountering an error in a row. If 'Error' is chosen the application will stop and an error trace will be prompted in logs. Conversely, if 'Discard' is chosen no error will be prompted and the row will be omitted.",
         "qa": "workflow-transformation-whenRowError"
      },
      {
         "propertyId": "whenFieldError",
         "propertyName": "_TRANSFORMATION_WHEN_FIELD_ERROR_",
         "propertyType": "select",
         "values": [
            {
               "label": "Error",
               "value": "FieldError"
            },
            {
               "label": "Discard",
               "value": "FieldDiscard"
            },
            {
               "label": "Null",
               "value": "Null"
            }
         ],
         "tooltip": "Sets the policy followed by the transformation when encountering an error in a field. If 'Error' is chosen the application will stop and an error trace will be prompted in logs. Conversely, if 'Null' is chosen no error will be prompted and the field value will be set to null.",
         "qa": "workflow-transformation-whenFieldError"
      }
   ]
}
