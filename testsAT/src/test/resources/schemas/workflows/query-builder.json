{
  "id": "18d9da06-f9eb-4839-ac8b-bae97ce8e610",
  "name": "query-builder-qa",
  "description": "query-builder-qa",
  "settings": {
    "global": {
      "executionMode": "marathon",
      "userPluginsJars": [],
      "initSqlSentences": [],
      "addAllUploadedPlugins": true,
      "mesosConstraintOperator": "CLUSTER"
    },
    "streamingSettings": {
      "window": "{{{SPARK_STREAMING_WINDOW}}}",
      "blockInterval": "{{{SPARK_STREAMING_BLOCK_INTERVAL}}}",
      "stopGracefully": true,
      "checkpointSettings": {
        "checkpointPath": "{{{SPARK_STREAMING_CHECKPOINT_PATH}}}",
        "enableCheckpointing": true,
        "autoDeleteCheckpoint": true,
        "addTimeToCheckpointPath": false
      }
    },
    "sparkSettings": {
      "master": "mesos://leader.mesos:5050",
      "sparkKerberos": true,
      "sparkDataStoreTls": true,
      "sparkMesosSecurity": true,
      "submitArguments": {
        "userArguments": [],
        "deployMode": "client",
        "driverJavaOptions": "{{{SPARK_DRIVER_JAVA_OPTIONS}}}"
      },
      "sparkConf": {
        "sparkResourcesConf": {
          "coresMax": "{{{SPARK_CORES_MAX}}}",
          "executorMemory": "{{{SPARK_EXECUTOR_MEMORY}}}",
          "executorCores": "{{{SPARK_EXECUTOR_CORES}}}",
          "driverCores": "{{{SPARK_DRIVER_CORES}}}",
          "driverMemory": "{{{SPARK_DRIVER_MEMORY}}}",
          "localityWait": "{{{SPARK_LOCALITY_WAIT}}}",
          "taskMaxFailures": "{{{SPARK_TASK_MAX_FAILURES}}}",
          "sparkMemoryFraction": "{{{SPARK_MEMORY_FRACTION}}}"
        },
        "userSparkConf": [],
        "coarse": true,
        "sparkLocalDir": "{{{SPARK_LOCAL_PATH}}}",
        "executorDockerImage": "{{{SPARK_EXECUTOR_BASE_IMAGE}}}",
        "sparkSqlCaseSensitive": true,
        "hdfsTokenCache": true,
        "executorExtraJavaOptions": "{{{SPARK_EXECUTOR_EXTRA_JAVA_OPTIONS}}}"
      }
    },
    "errorsManagement": {
      "genericErrorManagement": {
        "whenError": "Error"
      },
      "transformationStepsManagement": {
        "whenError": "Error",
        "whenRowError": "RowError",
        "whenFieldError": "FieldError"
      },
      "transactionsManagement": {
        "sendToOutputs": [],
        "sendStepData": false,
        "sendPredecessorsData": true,
        "sendInputData": true
      }
    }
  },
  "pipelineGraph": {
    "nodes": [
      {
        "name": "nombre",
        "stepType": "Input",
        "className": "TestInputStep",
        "classPrettyName": "Test",
        "arity": [
          "NullaryToNary"
        ],
        "writer": {
          "saveMode": "Append",
          "tableName": "",
          "partitionBy": "",
          "errorTableName": ""
        },
        "uiConfiguration": {
          "position": {
            "x": 588.9135131835938,
            "y": 81.08648681640625
          }
        },
        "configuration": {
          "maxNumbEvents": "",
          "eventType": "STRING",
          "outputField": "{{{DEFAULT_OUTPUT_FIELD}}}",
          "event": "{\"id\":\"11\",\"name\":\"pepito\"}\n{\"id\":\"12\",\"name\":\"pepito2\"}",
          "debugOptions": "{\"userProvidedExample\":\"{\\\"id\\\":\\\"11\\\",\\\"name\\\":\\\"pepito\\\"}\\n{\\\"id\\\":\\\"12\\\",\\\"name\\\":\\\"pepito2\\\"}\\n{\\\"id\\\":\\\"13\\\",\\\"name\\\":\\\"pepito2\\\"}\"}",
          "numEvents": "100"
        },
        "supportedEngines": [
          "Streaming"
        ],
        "executionEngine": "Streaming",
        "supportedDataRelations": [
          "ValidData"
        ],
        "lineageProperties": []
      },
      {
        "name": "direccion",
        "stepType": "Input",
        "className": "TestInputStep",
        "classPrettyName": "Test",
        "arity": [
          "NullaryToNary"
        ],
        "writer": {
          "saveMode": "Append",
          "tableName": "",
          "partitionBy": "",
          "errorTableName": ""
        },
        "uiConfiguration": {
          "position": {
            "x": 609,
            "y": 280
          }
        },
        "configuration": {
          "maxNumbEvents": "",
          "eventType": "STRING",
          "outputField": "{{{DEFAULT_OUTPUT_FIELD}}}",
          "event": "{\"id\":\"11\",\"direccion\":\"madrid\"}\n{\"id\":\"12\",\"direccion\":\"escultura\"}",
          "debugOptions": "{\"userProvidedExample\":\"{\\\"id\\\":\\\"11\\\",\\\"direccion\\\":\\\"madrid\\\"}\\n{\\\"id\\\":\\\"12\\\",\\\"direccion\\\":\\\"escultura\\\"}\"}",
          "numEvents": "2"
        },
        "supportedEngines": [
          "Streaming"
        ],
        "executionEngine": "Streaming",
        "supportedDataRelations": [
          "ValidData"
        ],
        "lineageProperties": []
      },
      {
        "name": "Json",
        "stepType": "Transformation",
        "className": "JsonTransformStep",
        "classPrettyName": "Json",
        "arity": [
          "UnaryToNary"
        ],
        "writer": {
          "saveMode": "Append",
          "tableName": "",
          "partitionBy": "",
          "errorTableName": ""
        },
        "uiConfiguration": {
          "position": {
            "x": 903,
            "y": 94
          }
        },
        "configuration": {
          "inputSchemas": "[]",
          "schema.fromRow": true,
          "whenFieldError": "",
          "whenRowError": "",
          "fieldsPreservationPolicy": "REPLACE",
          "inputField": "raw"
        },
        "supportedEngines": [
          "Streaming",
          "Batch"
        ],
        "executionEngine": "Streaming",
        "supportedDataRelations": [
          "ValidData",
          "DiscardedData"
        ],
        "lineageProperties": []
      },
      {
        "name": "Json_1",
        "stepType": "Transformation",
        "className": "JsonTransformStep",
        "classPrettyName": "Json",
        "arity": [
          "UnaryToNary"
        ],
        "writer": {
          "saveMode": "Append",
          "tableName": "",
          "partitionBy": "",
          "errorTableName": ""
        },
        "uiConfiguration": {
          "position": {
            "x": 896,
            "y": 231
          }
        },
        "configuration": {
          "inputSchemas": "[]",
          "schema.fromRow": true,
          "whenFieldError": "",
          "whenRowError": "",
          "fieldsPreservationPolicy": "REPLACE",
          "inputField": "raw"
        },
        "supportedEngines": [
          "Streaming",
          "Batch"
        ],
        "executionEngine": "Streaming",
        "supportedDataRelations": [
          "ValidData",
          "DiscardedData"
        ],
        "lineageProperties": []
      },
      {
        "name": "Print",
        "stepType": "Output",
        "className": "PrintOutputStep",
        "classPrettyName": "Print",
        "arity": [
          "NullaryToNullary",
          "NaryToNullary"
        ],
        "writer": {
          "saveMode": "Append"
        },
        "uiConfiguration": {
          "position": {
            "x": 1366.54638671875,
            "y": 513.2716064453125
          }
        },
        "configuration": {
          "printData": "",
          "printSchema": "",
          "errorSink": "",
          "printMetadata": true,
          "logLevel": "warn"
        },
        "supportedEngines": [
          "Streaming",
          "Batch"
        ],
        "executionEngine": "Streaming",
        "lineageProperties": []
      },
      {
        "name": "Trigger",
        "stepType": "Transformation",
        "className": "TriggerTransformStep",
        "classPrettyName": "Trigger",
        "arity": [
          "BinaryToNary",
          "UnaryToNary"
        ],
        "writer": {
          "saveMode": "Append",
          "tableName": "",
          "partitionBy": "",
          "errorTableName": ""
        },
        "uiConfiguration": {
          "position": {
            "x": 1392.5008620408598,
            "y": 329.9538053140456
          }
        },
        "configuration": {
          "sql": "select idnombre from QueryBuilder1",
          "discardConditions": "[]",
          "inputSchemas": "[]",
          "executeSqlWhenEmpty": true
        },
        "supportedEngines": [
          "Streaming"
        ],
        "executionEngine": "Streaming",
        "supportedDataRelations": [
          "ValidData",
          "DiscardedData"
        ],
        "lineageProperties": []
      },
      {
        "name": "QueryBuilder1",
        "stepType": "Transformation",
        "className": "QueryBuilderTransformStep",
        "classPrettyName": "QueryBuilder",
        "arity": [
          "UnaryToNary",
          "BinaryToNary"
        ],
        "writer": {
          "saveMode": "Append",
          "tableName": "",
          "partitionBy": "",
          "errorTableName": ""
        },
        "uiConfiguration": {
          "position": {
            "x": 1199.278779593525,
            "y": 143.54584917044457
          }
        },
        "configuration": {
          "backup": {
            "selectedInputSchemas": {},
            "outputSchemaFields": [
              {
                "expression": "t1.id",
                "column": "id",
                "order": "orderAsc",
                "originFields": [
                  {
                    "alias": "t1",
                    "name": "id",
                    "table": "Json"
                  }
                ],
                "position": {
                  "x": 882,
                  "y": 156,
                  "height": 41
                }
              },
              {
                "expression": "t2.id",
                "column": "id",
                "order": "",
                "originFields": [
                  {
                    "alias": "t2",
                    "name": "id",
                    "table": "Json_1"
                  }
                ],
                "position": {
                  "x": 882,
                  "y": 197,
                  "height": 41
                }
              },
              {
                "expression": "t2.direccion",
                "column": "direccion",
                "order": "",
                "originFields": [
                  {
                    "alias": "t2",
                    "name": "direccion",
                    "table": "Json_1"
                  }
                ],
                "position": {
                  "x": 882,
                  "y": 128,
                  "height": 41
                }
              },
              {
                "expression": "upper(t1.name)",
                "column": "idnombre",
                "order": "",
                "originFields": [
                  {
                    "alias": "t1",
                    "name": "name",
                    "table": "Json"
                  }
                ],
                "position": {
                  "x": 882,
                  "y": 169,
                  "height": 41
                }
              }
            ],
            "inputSchemaFields": [
              {
                "name": "Json",
                "alias": "t1",
                "fields": [
                  {
                    "column": "id",
                    "fieldType": "string",
                    "alias": "t1",
                    "table": "Json"
                  },
                  {
                    "column": "name",
                    "fieldType": "string",
                    "alias": "t1",
                    "table": "Json"
                  }
                ]
              },
              {
                "name": "Json_1",
                "alias": "t2",
                "fields": [
                  {
                    "column": "direccion",
                    "fieldType": "string",
                    "alias": "t2",
                    "table": "Json_1"
                  },
                  {
                    "column": "id",
                    "fieldType": "string",
                    "alias": "t2",
                    "table": "Json_1"
                  }
                ]
              }
            ],
            "showRelationPaths": true,
            "join": {
              "type": "RIGHT",
              "joins": [
                {
                  "origin": {
                    "column": "id",
                    "fieldType": "string",
                    "alias": "t1",
                    "table": "Json"
                  },
                  "destination": {
                    "column": "id",
                    "fieldType": "string",
                    "alias": "t2",
                    "table": "Json_1"
                  },
                  "initData": {
                    "tableName": "Json",
                    "fieldName": "id"
                  },
                  "fieldPositions": {
                    "direccion": {
                      "x": 62,
                      "y": 370,
                      "height": 41
                    },
                    "id": {
                      "x": 62,
                      "y": 411,
                      "height": 41
                    }
                  }
                }
              ]
            },
            "filter": ""
          },
          "discardConditions": "[]",
          "inputSchemas": "[]",
          "executeSqlWhenEmpty": true,
          "visualQuery": {
            "selectClauses": [
              {
                "expression": "t1.id",
                "alias": "id"
              },
              {
                "expression": "t2.id",
                "alias": "id"
              },
              {
                "expression": "t2.direccion",
                "alias": "direccion"
              },
              {
                "expression": "upper(t1.name)",
                "alias": "idnombre"
              }
            ],
            "whereClause": "",
            "joinClause": {
              "leftTable": {
                "tableName": "Json",
                "alias": "t1"
              },
              "rightTable": {
                "tableName": "Json_1",
                "alias": "t2"
              },
              "joinTypes": "RIGHT",
              "joinConditions": [
                {
                  "leftField": "id",
                  "rightField": "id"
                }
              ]
            },
            "orderByClauses": [
              {
                "field": "t1.id",
                "order": "ASC",
                "position": 0
              }
            ]
          }
        },
        "supportedEngines": [
          "Batch",
          "Streaming"
        ],
        "executionEngine": "Streaming",
        "supportedDataRelations": [
          "ValidData"
        ],
        "lineageProperties": []
      },
      {
        "name": "ComprobacionQueryBuilder",
        "stepType": "Transformation",
        "className": "TriggerTransformStep",
        "classPrettyName": "Trigger",
        "arity": [
          "BinaryToNary",
          "UnaryToNary"
        ],
        "writer": {
          "saveMode": "Append",
          "tableName": "",
          "partitionBy": "",
          "errorTableName": ""
        },
        "uiConfiguration": {
          "position": {
            "x": 884.1955064854048,
            "y": 471.803889567665
          }
        },
        "configuration": {
          "sql": "select j.*,j1.* from Json j cross join Json_1 j1",
          "discardConditions": "[]",
          "inputSchemas": "[]",
          "executeSqlWhenEmpty": true
        },
        "supportedEngines": [
          "Streaming"
        ],
        "executionEngine": "Streaming",
        "supportedDataRelations": [
          "ValidData",
          "DiscardedData"
        ],
        "lineageProperties": []
      }
    ],
    "edges": [
      {
        "origin": "direccion",
        "destination": "Json_1",
        "dataType": "ValidData"
      },
      {
        "origin": "nombre",
        "destination": "Json",
        "dataType": "ValidData"
      },
      {
        "origin": "Json_1",
        "destination": "Print",
        "dataType": "ValidData"
      },
      {
        "origin": "Trigger",
        "destination": "Print",
        "dataType": "ValidData"
      },
      {
        "origin": "Json",
        "destination": "QueryBuilder1",
        "dataType": "ValidData"
      },
      {
        "origin": "QueryBuilder1",
        "destination": "Trigger",
        "dataType": "ValidData"
      },
      {
        "origin": "Json_1",
        "destination": "QueryBuilder1",
        "dataType": "ValidData"
      },
      {
        "origin": "Json_1",
        "destination": "ComprobacionQueryBuilder",
        "dataType": "ValidData"
      },
      {
        "origin": "Json",
        "destination": "ComprobacionQueryBuilder",
        "dataType": "ValidData"
      },
      {
        "origin": "ComprobacionQueryBuilder",
        "destination": "Print",
        "dataType": "ValidData"
      }
    ]
  },
  "executionEngine": "Streaming",
  "uiSettings": {
    "position": {
      "x": -62.422483281165455,
      "y": 27.499080478783696,
      "k": 0.8471280701163423
    }
  },
  "lastUpdateDate": "2018-07-26T10:57:35Z",
  "version": 2,
  "group": {
    "id": "af892800-2b32-424d-bdb4-904414380da2",
    "name": "/home/querybuilder"
  },
  "status": {
    "id": "18d9da06-f9eb-4839-ac8b-bae97ce8e610",
    "status": "Created",
    "statusId": "9c8fabbb-df5c-4773-ab60-a1d71609dff8",
    "creationDate": "2018-07-25T16:05:35Z"
  },
  "debugMode": false,
  "versionSparta": "2.2.0-804decd"
}