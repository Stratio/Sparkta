# API
sparta.postgres.url="jdbc:postgresql://127.0.0.1:5432/postgres?user=postgres"
sparta.postgres.url = ${?SPARTA_POSTGRES_URL}
sparta.postgres.driver = org.postgresql.Driver
sparta.postgres.connectionPool = "HikariCP"
sparta.postgres.historyEnabled = false
sparta.postgres.historyEnabled = ${?SPARTA_POSTGRES_ENABLED}
sparta.postgres.initializationFailFast = true
sparta.postgres.poolName =  "spartaPostgresPool"
sparta.postgres.keepAliveConnection = true
sparta.postgres.keepAliveConnection = ${?SPARTA_POSTGRES_KEEP_ALIVE}
sparta.postgres.executionHistory.table = workflow_test_it
sparta.postgres.executionHistory.table = ${?SPARTA_POSTGRES_EXECUTION_TABLE}
sparta.postgres.statusHistory.table = workflow_status_history
sparta.postgres.statusHistory.table = ${?SPARTA_POSTGRES_STATUS_TABLE}
sparta.postgres.poolSize = 20
sparta.postgres.poolSize = ${?SPARTA_POSTGRES_POOL_SIZE}

plugin.version = 0.0.1

sparta.api.host = 0.0.0.0
sparta.api.port = 9090
sparta.api.certificate-file = "/home/user/certifications/stratio.jks"
sparta.api.certificate-password = "stratio"

# Api timeouts
sparta.api.timeout = 20
sparta.api.timeout = ${?SPARTA_TIMEOUT_API_CALLS}

# ZOOKEEPER

sparta.zookeeper.connectionString = "localhost:2181"
sparta.zookeeper.storagePath = "/stratio/sparta/sparta"
sparta.zookeeper.connectionTimeout = 15000
sparta.zookeeper.sessionTimeout = 60000
sparta.zookeeper.retryAttempts = 5
sparta.zookeeper.retryInterval = 10000


# OAUTH2

oauth2.enable = "false"
# oauth2.cookieName="user"
# oauth2.url.authorize = "https://server.domain:9005/cas/oauth2.0/authorize"
# oauth2.url.accessToken = "https://server.domain:9005/cas/oauth2.0/accessToken"
# oauth2.url.profile = "https://server.domain:9005/cas/oauth2.0/profile"
# oauth2.url.logout = "https://server.domain:9005/cas/logout"
# oauth2.url.callBack = "http://callback.domain:9090/login"
# oauth2.url.onLoginGoTo = "/"
# oauth2.client.id = "userid"
# oauth2.client.secret = "usersecret"


# SPRAY

spray.can.server.ssl-encryption = "off"
spray.can.server.request-timeout = 20s


# AKKA

akka.log-dead-letters = off
akka.loggers = ["akka.event.slf4j.Slf4jLogger"]
akka.logger-startup-timeout = 30s
akka.persistence.journal.plugin = "akka.persistence.journal.leveldb"
akka.persistence.snapshot-store.plugin = "akka.persistence.snapshot-store.local"
akka.persistence.journal.leveldb.dir = "/tmp/persistence/journal"
akka.persistence.snapshot-store.local.dir = "/tmp/persistence/snapshots"
akka.persistence.journal.leveldb.native = off


# CONFIG

# Driver jar served by Sparta in this location
sparta.config.driverPackageLocation = "/tmp/sparta/driver"

# Plugin jar are saved in this dir
sparta.config.pluginsLocation = "plugins"

# Backups files are saved in this dir
sparta.config.backupsLocation = "/tmp/sparta/backups"

# Maximun time when await to policy status change when run polices in cluster mode
sparta.config.awaitWorkflowChangeStatus = 180s

# Api timeouts
sparta.config.timeout = 20
sparta.config.timeout = ${?SPARTA_TIMEOUT_API_CALLS}

# How often Sparta should check for inconsistent statuses
sparta.config.marathon.checkInterval = "1m"




####################################
#                                  #
#      Security configuration      #
#                                  #
####################################

# Sparta security mode implementation based on the GoSec plugin
sparta.security.manager.enabled = false

# HDFS

# The hadoop user name could be configured by two ways:
# 1. Using the enviroment variable HADOOP_USER_NAME
# 2. Using the variable hadoopUserName from properties file
# sparta.hdfs.hadoopUserName = sparta

# If the variable HADOOP_CONF_DIR is not defined, "hdfsMaster" variable and "hdfsPort" are used to
# connect to HDFS cluster in order to upload jars to HDFS (plugins and driver), but the Spark executors and the
# Spark driver need this environment variable defined. In producction environments is recomended use
# HADOOP_CONF_DIR because use HA in Hadoop Namenodes, and omit "hdfsMaster and hdfsPort property"
# sparta.hdfs.hdfsMaster = 127.0.0.1
# sparta.hdfs.hdfsPort = 9000

# Configuration to connect to HDFS Kerberized

# The principal name could be configured by two ways:
# 1. Using the enviroment variable SPARTA_PRINCIPAL_NAME
# 2. Using the variable principalName from properties file
# The principal name used to connect to HDFS securized have the order 1, 2
# sparta.hdfs.principalName = ""

# The keytab path could be configured by two ways:
# 1. Using the enviroment variable SPARTA_KEYTAB_PATH
# 2. Using the variable keytabPath from properties file

# sparta.hdfs.keytabPath = ""
# sparta.hdfs.reloadKeyTab = false
# sparta.hdfs.reloadKeyTabTime = 23h


### SPARK MARATHON deployments ###

sparta.marathon.docker.image = "qa.stratio.com/stratio/sparta:2.0.0"
sparta.marathon.docker.forcePullImage = false
sparta.marathon.docker.privileged = false
sparta.marathon.jar = "/opt/sds/sparta/driver/sparta-driver.jar"
sparta.marathon.template.file = "/etc/sds/sparta/marathon-app-template.json"
sparta.marathon.mesosphere.lib = "/opt/mesosphere/lib"
sparta.marathon.mesosphere.packages = "/opt/mesosphere/packages"
sparta.marathon.gracePeriodSeconds = 180
sparta.marathon.intervalSeconds = 60
sparta.marathon.timeoutSeconds = 20
sparta.marathon.maxConsecutiveFailures = 3
# sparta.marathon.sso.uri = "https://gosec2.labs.stratio.com:9005/gosec-sso"
# sparta.marathon.sso.username = "admin"
# sparta.marathon.sso.password = "1234"
# sparta.marathon.sso.clientId = "adminrouter_paas-master-1.labs.stratio.com"
# sparta.marathon.sso.redirectUri = "https://master-1.labs.stratio.com/acs/api/v1/auth/login&firstUser=false"
# sparta.marathon.tikitakka.marathon.uri = "http://master-1.labs.stratio.com:8080"
sparta.marathon.tikitakka.marathon.api.version = "v2"
